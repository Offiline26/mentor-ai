<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Mentor AI ‚Ä¢ Laborat√≥rio de IA</title>

    <style>
        :root {
            --bg:#0f172a;
            --card:#111827;
            --fg:#e5e7eb;
            --muted:#9ca3af;
            --accent:#22d3ee;
            --success:#059669;
            --border:#374151;
        }
        body {
            margin:0;
            min-height:100vh;
            background:linear-gradient(120deg,#0f172a,#1f2937);
            font-family:system-ui,-apple-system,sans-serif;
            color:var(--fg);
            display: flex;
            justify-content: center;
            padding: 40px 20px;
        }
        .container {
            width: min(800px, 95vw); /* Mais largo que o login */
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Card Estilizado */
        .card {
            background:var(--card);
            padding:28px;
            border-radius:16px;
            box-shadow:0 16px 50px rgba(0,0,0,.35);
            border: 1px solid #1f2937;
        }

        h1, h2 { margin:0 0 15px 0; color: var(--accent); }
        h3 { margin: 15px 0 5px 0; color: #fff; font-size: 16px; }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .full-width { grid-column: span 2; }

        label {
            font-size: 12px;
            color: var(--muted);
            margin-bottom: 4px;
            display: block;
        }

        input, select, textarea {
            width:100%;
            padding:12px;
            border-radius:10px;
            border:1px solid var(--border);
            background:#0b1220;
            color:var(--fg);
            box-sizing: border-box;
            font-family: inherit;
        }

        input:focus { outline: 2px solid var(--accent); border-color: transparent; }

        button {
            padding:14px;
            background:var(--accent);
            border:none;
            color:#082f49;
            border-radius:10px;
            cursor:pointer;
            font-weight:800;
            font-size: 16px;
            margin-top: 10px;
            transition: all 0.2s;
        }
        button:hover { filter: brightness(1.1); }
        button:disabled { background: var(--muted); cursor: not-allowed; }

        /* Resultado da IA */
        .result-box {
            background: #0b1220;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--accent);
            margin-top: 20px;
        }
        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .tag {
            background: rgba(34, 211, 238, 0.15);
            color: var(--accent);
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 13px;
            border: 1px solid rgba(34, 211, 238, 0.3);
        }
        ul { padding-left: 20px; margin: 5px 0; }
        li { margin-bottom: 6px; color: #d1d5db; }

        .alert { padding: 10px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; text-align: center; }
        .success { background: rgba(5, 150, 105, 0.2); color: #6ee7b7; border: 1px solid #059669; }
        .error { background: rgba(220, 38, 38, 0.2); color: #fca5a5; border: 1px solid #dc2626; }

        /* Loading Animation */
        .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        .btn-content { display: flex; align-items: center; justify-content: center; }

    </style>
</head>

<body>
<div class="container">

    <div class="card">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h1>ü§ñ Mentor AI ‚Ä¢ Lab</h1>
            <a href="/" style="color: var(--muted); text-decoration: none; font-size: 14px;">‚Üê Voltar</a>
        </div>
        <p style="color:var(--muted); font-size: 14px; margin-bottom: 20px;">
            Teste a infer√™ncia do modelo <strong>Microsoft Phi-3</strong> rodando On-Premise.
        </p>

        <div th:if="${sucesso}" class="alert success" th:text="${sucesso}"></div>
        <div th:if="${erro}" class="alert error" th:text="${erro}"></div>

        <form th:action="@{/mentor-test}" method="post" th:object="${request}" id="aiForm">

            <div class="form-grid">
                <div>
                    <label>Nome do Usu√°rio</label>
                    <input type="text" th:field="*{nomeUsuario}" placeholder="Ex: Thiago" required/>
                </div>
                <div>
                    <label>Horas p/ Estudo (Semanal)</label>
                    <input type="number" th:field="*{horasPorSemana}" placeholder="Ex: 10" required/>
                </div>

                <div class="full-width">
                    <label>Cargo Atual</label>
                    <input type="text" th:field="*{cargoAtual}" placeholder="Ex: Desenvolvedor Java Junior" required/>
                </div>

                <div class="full-width">
                    <label>Objetivo Profissional</label>
                    <input type="text" th:field="*{objetivoProfissional}" placeholder="Ex: Arquiteto de Software S√™nior" required/>
                </div>

                <div class="full-width">
                    <label>√Årea de Atua√ß√£o</label>
                    <input type="text" th:field="*{areaAtuacao}" placeholder="Ex: Tecnologia da Informa√ß√£o" required/>
                </div>

                <div class="full-width">
                    <label>Habilidades Atuais (Separe por v√≠rgula)</label>
                    <input type="text" th:field="*{habilidadesAtuais}" placeholder="Ex: Java, SQL, Spring Boot" />
                </div>

                <div class="full-width">
                    <label>Habilidades Desejadas (Separe por v√≠rgula)</label>
                    <input type="text" th:field="*{habilidadesDesejadas}" placeholder="Ex: Kubernetes, Cloud Azure, Microsservi√ßos" />
                </div>
            </div>

            <button type="submit" id="btnSubmit">
                <div class="btn-content">
                    <div class="spinner" id="spinner"></div>
                    <span id="btnText">Gerar Rota com IA</span>
                </div>
            </button>
        </form>
    </div>

    <div class="card" th:if="${resultado != null}">
        <h2>‚ú® Plano de Carreira Gerado</h2>

        <div class="result-box">
            <h3>üéØ Estrat√©gia</h3>
            <p style="line-height: 1.6; color: #cbd5e1;" th:text="${resultado.resumoEstrategia}"></p>

            <hr style="border-color: var(--border); margin: 20px 0;">

            <h3>üöÄ Passos Pr√°ticos</h3>
            <ul>
                <li th:each="passo : ${resultado.passosSugeridos}" th:text="${passo}"></li>
            </ul>

            <hr style="border-color: var(--border); margin: 20px 0;">

            <h3>‚ö° Habilidades Priorit√°rias</h3>
            <div class="tag-list">
                <span class="tag" th:each="hab : ${resultado.habilidadesPrioritarias}" th:text="${hab}"></span>
            </div>

            <br>

            <h3>üìö Sugest√µes de Estudo</h3>
            <ul>
                <li th:each="curso : ${resultado.sugestoesDeCursos}" th:text="${curso}"></li>
            </ul>
        </div>
    </div>

</div>

<script>
    document.getElementById('aiForm').addEventListener('submit', function() {
        const btn = document.getElementById('btnSubmit');
        const text = document.getElementById('btnText');
        const spinner = document.getElementById('spinner');

        btn.disabled = true;
        btn.style.background = '#1f2937'; // Cinza escuro
        text.innerText = "Processando Deep Learning (Aguarde ~40s)...";
        spinner.style.display = 'block';
    });
</script>

</body>
</html>